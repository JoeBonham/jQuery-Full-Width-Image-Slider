(function(a){a.fn.fullWidth=function(b){var d={maxHeight:450,minHeight:375,delay:5000,transition:1000,maxFont:36,minFont:24},c=a.extend(d,b);return this.each(function(){var m=a(this),r=m.find(".inner"),f=r.find(".slide"),n=f.find("img"),e=m.find(".slide-nav"),q=m.find(".controls a"),i="",l={current:0,max:f.length-1},k={slides:"",resize:""},j=function(t,s){if(r.is(":animated")){return}o();if(t==="right"){l.current=l.current+1>l.max?0:l.current+1}else{if(t==="left"){l.current=l.current-1<0?l.max:l.current-1}else{l.current=s||"0"}}i.removeClass("current").eq(l.current).addClass("current");r.animate({"margin-left":"-"+100*l.current+"%"},c.transition,function(){g()})},g=function(){k.slides=setTimeout(function(){j("right")},c.delay)},o=function(){clearTimeout(k.slides)},h=function(){r.css("height",function(){var s=parseInt(a(window).width()/3,10);return s>c.maxHeight?c.maxHeight:s<c.minHeight?c.minHeight:s});n.css("margin-top",function(){var t=r.height(),s=a(this).height();return"-"+(t>s?t-s:s-t)/2+"px"});f.find("div").css("font-size",function(){var s=a(window).width()/41;s=s>c.maxFont?c.maxFont:s;s=s<c.minFont?c.minFont:s;return a(window).width()<480?20:s}).css("top",function(){var s=r.height()-a(this).height();return a(window).width()<=480?s:s/2})},p=function(){a(window).resize(function(){clearTimeout(k.resize);k.resize=setTimeout(function(){h()},100)}).trigger("resize");q.on("click",function(){j(this.className);return false});m.on("mouseenter mouseleave",function(s){if(q.is(":animated")){return}s.type==="mouseenter"?q.fadeIn():q.fadeOut()});i.on("click",function(){j("direct",a(this).index())});a(document).on("keydown",function(s){if(!(s.which===37||s.which===39)){return}j(s.which===37?"left":"right")})};(function(){r.css("height",c.minHeight);f.each(function(s){a(this).addClass("slide-"+(s+1))});r.css("width",(f.length*100)+"%");f.css("width",parseInt(100/f.length,10)+"%").each(function(){e.append("<span>&bull;</span>")});i=e.find("span");i.first().addClass("current");e.css("width",function(){return i.length*26});a(window).load(function(){p();r.fadeTo(1000,1,function(){g()})})}())})}}(jQuery));